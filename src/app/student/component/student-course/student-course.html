
<div class="dashboard-container" *ngIf="!loading; else loadingTpl">
  <h2>ğŸ“˜ {{ courseData.name }}</h2>
  <h3>DescripciÃ³n: {{ courseData.description }}</h3>

  <mat-tab-group>
    <!-- ğŸ…°ï¸ InformaciÃ³n general -->
    <mat-tab label="General">

      <section class="info-section">
        <h3>ğŸ“„ Documentos Subidos</h3>
        <ul>
          <li *ngFor="let doc of documents">
            <button mat-icon-button color="primary" (click)="download(doc.id)">
              <mat-icon>download</mat-icon>
            </button>
            <button mat-icon-button color="warm" (click)="openDocument(doc.id)">
              <mat-icon>preview</mat-icon>
            </button>
            <p> {{ doc.name }} </p>

          </li>
        </ul>

        <h3>ğŸ•¹ï¸ Actividades y Novedades</h3>
          <p *ngIf="!loading && news.length === 0">
            Este curso no tiene novedades todavÃ­a.
          </p>
         <div *ngFor="let n of news" class="news-card">
          <p>{{ n.text }}</p>
          <small>{{ n.createdAt | date:'dd/MM/yyyy HH:mm' }}</small>
        </div>

      </section>
      </mat-tab>

    <!-- ğŸ…² Calificaciones -->
    <mat-tab label="Calificaciones y Novedades">
      <section class="grades-section">
        <h3>ğŸ“Š Calificaciones</h3>
         <!-- Si no hay notas -->
        <p *ngIf="!grades || grades.length === 0">
          AÃºn no tienes calificaciones registradas en este curso.
        </p>

        <div *ngIf="grades">

      <!-- ACTIVIDADES -->
      <h4>ğŸ“ Actividades</h4>

      <table mat-table [dataSource]="grades.activities" class="table"
              *ngIf="grades.activities?.length > 0">

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Actividad</th>
            <td mat-cell *matCellDef="let act">{{ act.name }}</td>
          </ng-container>

          <ng-container matColumnDef="grade">
            <th mat-header-cell *matHeaderCellDef>Nota</th>
            <td mat-cell *matCellDef="let act">{{ act.grade }}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="['name', 'grade']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['name', 'grade'];"></tr>
        </table>

        <p *ngIf="grades.activities?.length === 0">
          No tienes actividades calificadas aÃºn.
        </p>


        <!-- EXÃMENES -->
        <h4>ğŸ§ª ExÃ¡menes</h4>

        <table mat-table [dataSource]="grades.exams" class="table"
              *ngIf="grades.exams?.length > 0">

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Examen</th>
            <td mat-cell *matCellDef="let exam">{{ exam.name }}</td>
          </ng-container>

          <ng-container matColumnDef="grade">
            <th mat-header-cell *matHeaderCellDef>Nota</th>
            <td mat-cell *matCellDef="let exam">{{ exam.grade }}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="['name', 'grade']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['name', 'grade'];"></tr>
        </table>

        <p *ngIf="grades.exams?.length === 0">
          No tienes exÃ¡menes calificados aÃºn.
        </p>

      </div>

        <h3>ğŸ—ï¸ Ãšltimas novedades</h3>
         <p *ngIf="!loading && news.length === 0">
            Este curso no tiene novedades todavÃ­a.
          </p>
         <div *ngFor="let n of news" class="news-card">
          <p>{{ n.text }}</p>
          <small>{{ n.createdAt | date:'dd/MM/yyyy HH:mm' }}</small>
        </div>
      </section>
    </mat-tab>
  </mat-tab-group>
</div>

<ng-template #loadingTpl>
  <div class="loading">
    <mat-icon>hourglass_empty</mat-icon>
    Cargando informaciÃ³n del curso...
  </div>
</ng-template>
